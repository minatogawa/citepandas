{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block extra_head %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock %}

{% block content %}
<h1 class="mb-4">{{ title }}</h1>
<div id="plot" class="mb-4"></div>
<h2 class="mb-3">AI Analysis</h2>
<p class="lead">{{ analysis }}</p>
<a href="{{ url_for('dashboard') }}" class="btn btn-primary">Back to Dashboard</a>
{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var plotData = JSON.parse({{ plot | tojson | safe }});
        Plotly.newPlot('plot', plotData.data, plotData.layout);
    });
</script>
{% endblock %}
